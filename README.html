<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞ –Ω–∞ Go —Å CI/CD –Ω–∞ Yandex Cloud</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        h2 {
            color: #2c3e50;
            margin: 40px 0 20px 0;
            padding-left: 15px;
            border-left: 4px solid #3498db;
        }
        h3 {
            color: #34495e;
            margin: 25px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        .step {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        .command {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
        }
        .command code {
            display: block;
            white-space: pre-wrap;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 4px solid #fdcb6e;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .success {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .quick-start {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        .note {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-left: 4px solid #28a745;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        a {
            color: #3498db;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .emoji {
            font-size: 1.2em;
            margin-right: 5px;
        }
        .toc {
            background: #e8f4fc;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
        }
        .toc ul {
            margin-left: 20px;
        }
        .toc li {
            margin: 10px 0;
        }
        .file-structure {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f8f9fa;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .copy-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 0.9em;
            transition: background 0.3s;
        }
        .copy-btn:hover {
            background: #2980b9;
        }
        .checklist {
            margin-left: 20px;
        }
        .checklist li {
            margin: 8px 0;
            padding-left: 5px;
        }
        .critical {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-left: 4px solid #dc3545;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><span class="emoji">üìö</span> –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞ –Ω–∞ Go —Å CI/CD –Ω–∞ Yandex Cloud</h1>

        <!-- –ë–õ–û–ö –ë–´–°–¢–†–û–ì–û –°–¢–ê–†–¢–ê -->
        <div class="quick-start">
            <h2 style="color: white; border-left: none; padding-left: 0; margin-top: 0;">
                <span class="emoji">‚ö°</span> –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏–∑ —à–∞–±–ª–æ–Ω–∞ (–∑–∞ 2 –º–∏–Ω—É—Ç—ã)
            </h2>
            <p>–£–∂–µ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π —Ä–∞–±–æ—á–∏–π —à–∞–±–ª–æ–Ω? –ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:</p>

            <div class="command">
                <code># –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω
git clone https://github.com/vmkotov/vmkotov_test_bot.git my-new-bot
cd my-new-bot

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
rm -rf .git
git init
go mod init my-new-bot
cp .env.example .env

# –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ .env
echo "TELEGRAM_BOT_TOKEN=your_token_here" >> .env</code>
            </div>

            <div style="margin-top: 20px;">
                <p><strong>–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:</strong></p>
                <ul class="checklist" style="color: white;">
                    <li>‚úÖ <strong>–ó–∞–º–µ–Ω–∏—Ç–µ –∏–º—è –º–æ–¥—É–ª—è –≤ `go.mod` –∏ –∏–º–ø–æ—Ä—Ç–∞—Ö –≤ `main.go`</strong></li>
                    <li>‚úÖ <strong>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Yandex Cloud: —Å–æ–∑–¥–∞–π—Ç–µ SA, Registry, Container</strong> (–®–∞–≥ 5)</li>
                    <li>‚úÖ <strong>–í—ã–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞</strong> (–®–∞–≥ 6)</li>
                    <li>‚úÖ <strong>–î–æ–±–∞–≤—å—Ç–µ 6 —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è</strong></li>
                    <li>‚úÖ –ó–∞–ø—É—à—å—Ç–µ –∫–æ–¥ ‚Äî CI/CD –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä–Ω—ë—Ç –±–æ—Ç–∞</li>
                </ul>
            </div>

            <p style="margin-top: 15px; font-style: italic;">
                –ü—Ä–æ–ø—É—Å–∫ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —à–∞–≥–æ–≤ ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–æ–∫ –¥–µ–ø–ª–æ—è. –ù–∏–∂–µ ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ ‚Üì
            </p>
        </div>

        <div class="toc">
            <h2>üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</h2>
            <ul>
                <li><a href="#preparation">üõ†Ô∏è 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</a></li>
                <li><a href="#create-bot">ü§ñ 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –≤ Telegram</a></li>
                <li><a href="#local-dev">üíª 3. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞</a></li>
                <li><a href="#project-structure">üìÅ 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</a></li>
                <li><a href="#yc-setup">‚òÅÔ∏è 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex Cloud</a></li>
                <li><a href="#github-setup">üîß 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions</a></li>
                <li><a href="#deployment">üöÄ 7. –î–µ–ø–ª–æ–π –∏ –≤–µ–±—Ö—É–∫–∏</a></li>
                <li><a href="#debugging">üîç 8. –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</a></li>
                <li><a href="#templates">üéØ 9. –®–∞–±–ª–æ–Ω—ã –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</a></li>
            </ul>
        </div>

        <!-- –î–∞–ª–µ–µ –∏–¥—É—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏ 1-4 (–æ–Ω–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) -->
        <section id="preparation">
            <h2><span class="emoji">üõ†Ô∏è</span> 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</h2>
            <div class="step">
                <h3>–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:</h3>
                <div class="command">
                    <code># macOS
brew install go
brew install git
brew install docker

# Ubuntu/Debian
sudo apt update
sudo apt install -y golang git docker.io curl wget</code>
                </div>
                <div class="command">
                    <code># –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Yandex Cloud CLI
curl -sSL https://storage.yandexcloud.net/yandexcloud-yc/install.sh | bash
source ~/.bashrc  # –∏–ª–∏ source ~/.zshrc
yc --version</code>
                </div>
            </div>
            <div class="note">
                <strong>üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –ï—Å–ª–∏ –≤—ã Windows –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ WSL2 (Windows Subsystem for Linux) –∏–ª–∏ Docker Desktop.
            </div>
        </section>

        <section id="create-bot">
            <h2><span class="emoji">ü§ñ</span> 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –≤ Telegram</h2>
            <div class="step">
                <h3>–®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞</h3>
                <p>–û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ <a href="https://t.me/BotFather" target="_blank">@BotFather</a></p>
                <div class="command">
                    <code>/newbot
‚Üí –í–∞—à–µ –∏–º—è –±–æ—Ç–∞: –ú–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç
‚Üí Username –±–æ—Ç–∞: mytest_bot</code>
                </div>
                <p><strong>–°–û–•–†–ê–ù–ò–¢–ï –¢–û–ö–ï–ù!</strong> –û–Ω –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫: <code>7123456789:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw</code></p>
            </div>
        </section>

        <section id="local-dev">
            <h2><span class="emoji">üíª</span> 3. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞</h2>
            <div class="step">
                <h3>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞:</h3>
                <div class="command">
                    <code># –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
mkdir telegram-bot-project
cd telegram-bot-project
go mod init my-telegram-bot
go get github.com/go-telegram-bot-api/telegram-bot-api/v5
go get github.com/joho/godotenv</code>
                </div>
            </div>
        </section>

        <section id="project-structure">
            <h2><span class="emoji">üìÅ</span> 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</h2>
            <div class="file-structure">
telegram-bot-project/
‚îú‚îÄ‚îÄ main.go                 # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ go.mod                  # Go –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ò–ú–Ø –ú–û–î–£–õ–Ø –î–û–õ–ñ–ù–û –°–û–í–ü–ê–î–ê–¢–¨!)
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ Dockerfile.yc           # Dockerfile –¥–ª—è Yandex Cloud
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ .github/workflows/
    ‚îî‚îÄ‚îÄ deploy.yml          # Workflow –¥–ª—è CI/CD
            </div>
        </section>

        <!-- –í–°–¢–ê–í–õ–ï–ù–ù–û: –î–æ–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞—è —Å–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ YC -->
        <section id="yc-setup">
            <h2><span class="emoji">‚òÅÔ∏è</span> 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex Cloud</h2>
            <div class="critical">
                <strong>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –≠—Ç–æ—Ç —à–∞–≥ –Ω–µ–ª—å–∑—è –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å.</strong> –ë–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –ø—Ä–∞–≤ CI/CD –Ω–µ —Å–º–æ–∂–µ—Ç –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –±–æ—Ç–∞.
            </div>
            <div class="step">
                <h3>–®–∞–≥ 5.1: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –≤—ã–±–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞</h3>
                <div class="command">
                    <code># –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å yc (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ)
yc init

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤ –Ω—É–∂–Ω–æ–º –æ–±–ª–∞–∫–µ –∏ –ø–∞–ø–∫–µ
yc config list</code>
                </div>
            </div>
            <div class="step">
                <h3>–®–∞–≥ 5.2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (Service Account)</h3>
                <p>–û–Ω –Ω—É–∂–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã CI/CD –∏–∑ GitHub.</p>
                <div class="command">
                    <code># –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
yc iam service-account create --name your-bot-sa

# –ü–æ–ª—É—á–∏—Ç–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ ID (–ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤ GitHub)
yc iam service-account get --name your-bot-sa --format json | jq -r '.id'
# –ó–∞–ø–∏—à–∏—Ç–µ —ç—Ç–æ—Ç ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, aje0eno6g4o1o94901fu)</code>
                </div>
            </div>
            <div class="step">
                <h3>–®–∞–≥ 5.3: –°–æ–∑–¥–∞–Ω–∏–µ Container Registry</h3>
                <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –æ–±—Ä–∞–∑—ã Docker –≤–∞—à–µ–≥–æ –±–æ—Ç–∞.</p>
                <div class="command">
                    <code># –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–µ—Å—Ç—Ä
yc container registry create --name your-bot-registry

# –ü–æ–ª—É—á–∏—Ç–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ ID
yc container registry get --name your-bot-registry --format json | jq -r '.id'
# –ó–∞–ø–∏—à–∏—Ç–µ —ç—Ç–æ—Ç ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, crpu0dros8vtrtmeiqt3)</code>
                </div>
            </div>
            <div class="step">
                <h3>–®–∞–≥ 5.4: –°–æ–∑–¥–∞–Ω–∏–µ Serverless Container</h3>
                <p>–≠—Ç–æ "–º–∞—à–∏–Ω–∞", –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–∞—à –±–æ—Ç –≤ –æ–±–ª–∞–∫–µ.</p>
                <div class="command">
                    <code># –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
yc serverless container create --name your-bot-container

# –ó–∞–ø–∏—à–∏—Ç–µ –µ–≥–æ –∏–º—è (your-bot-container)</code>
                </div>
                <p class="note">–ò–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∏–º–µ–Ω–µ–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ —Ñ–∞–π–ª–µ <code>.github/workflows/deploy.yml</code> (—Å—Ç—Ä–æ–∫–∞ —Å <code>--container-name</code>).</p>
            </div>
        </section>

        <!-- –í–°–¢–ê–í–õ–ï–ù–ù–û: –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞—è —Å–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub Actions -->
        <section id="github-setup">
            <h2><span class="emoji">üîß</span> 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions</h2>
            <div class="critical">
                <strong>üö® –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç –¥–µ–ø–ª–æ—è!</strong> 90% –æ—à–∏–±–æ–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø—Ä–∞–≤ —É —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞.
            </div>

            <!-- –í–°–¢–ê–í–õ–ï–ù–ù–û: –ù–æ–≤–∞—è –ø–æ–¥—Å–µ–∫—Ü–∏—è –ø—Ä–æ –ø—Ä–∞–≤–∞ -->
            <div class="step">
                <h3>6.1 –í–∞–∂–Ω–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ä–æ–ª–µ–π) –¥–ª—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞</h3>
                <p>–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã <strong>–¥–æ</strong> –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub. –ë–µ–∑ —ç—Ç–∏—Ö –ø—Ä–∞–≤ CI/CD —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π <code>PermissionDenied</code>.</p>
                <div class="command">
                    <code># 1. –î–∞–π—Ç–µ —Ä–æ–ª—å 'editor' –Ω–∞ –≤—Å—é –ø–∞–ø–∫—É (–¥–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ä–µ—Å—É—Ä—Å–∞–º –≤ –Ω–µ–π)
yc resource-manager folder add-access-binding $(yc config get folder-id) \
  --service-account-name your-bot-sa \
  --role editor

# 2. –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å (push) –≤ Container Registry
yc container registry add-access-binding YOUR_REGISTRY_ID \
  --service-account-name your-bot-sa \
  --role container-registry.images.pusher

# 3. –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–∑–æ–≤ (invoke) Serverless Container
yc serverless container add-access-binding your-bot-container \
  --service-account-name your-bot-sa \
  --role serverless.containers.invoker</code>
                </div>
                <div class="note">
                    <strong>üí° –°–æ–≤–µ—Ç:</strong> –ó–∞–º–µ–Ω–∏—Ç–µ <code>YOUR_REGISTRY_ID</code> –∏ <code>your-bot-container</code> –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —à–∞–≥–∞ 5.
                </div>
            </div>

            <div class="step">
                <h3>6.2 –°–±–æ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–ª—è GitHub</h3>
                <p>–í–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ Secrets –≤–∞—à–µ–≥–æ GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Ä–æ–≤–Ω–æ 6 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.</p>
                <table>
                    <thead>
                        <tr>
                            <th>–ò–º—è —Å–µ–∫—Ä–µ—Ç–∞ –≤ GitHub</th>
                            <th>–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ</th>
                            <th>–ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>TELEGRAM_BOT_TOKEN</code></td>
                            <td>–¢–æ–∫–µ–Ω –æ—Ç @BotFather</td>
                            <td><code>8259540XXX:AAEc5luOFTX...</code></td>
                        </tr>
                        <tr>
                            <td><code>YC_IAM_KEY_JSON</code></td>
                            <td><code>yc iam key create --service-account-name your-bot-sa --output key.json && cat key.json</code></td>
                            <td>–ü–æ–ª–Ω—ã–π JSON (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞)</td>
                        </tr>
                        <tr>
                            <td><code>YC_SERVICE_ACCOUNT_ID</code></td>
                            <td><code>yc iam service-account get --name your-bot-sa --format json | jq -r '.id'</code></td>
                            <td><code>aje0eno6g4o1o94901fu</code></td>
                        </tr>
                        <tr>
                            <td><code>YC_REGISTRY_ID</code></td>
                            <td><code>yc container registry get --name your-bot-registry --format json | jq -r '.id'</code></td>
                            <td><code>crpu0dros8vtrtmeiqt3</code></td>
                        </tr>
                        <tr>
                            <td><code>YC_CLOUD_ID</code></td>
                            <td><code>yc config get cloud-id</code></td>
                            <td><code>b1g7r2nm7eo87juq7h7n</code></td>
                        </tr>
                        <tr>
                            <td><code>YC_FOLDER_ID</code></td>
                            <td><code>yc config get folder-id</code></td>
                            <td><code>b1gk2n6bk496dkh4e9kr</code></td>
                        </tr>
                    </tbody>
                </table>
                <p><strong>–ì–¥–µ –¥–æ–±–∞–≤–∏—Ç—å:</strong> –ù–∞ GitHub ‚Üí –í–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí New repository secret.</p>
            </div>

            <div class="step">
                <h3>6.3 –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –ø—É—à–µ–º</h3>
                <p>–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∑–∞–ø—É—à–∏—Ç—å –∫–æ–¥ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å CI/CD, —É–±–µ–¥–∏—Ç–µ—Å—å:</p>
                <ul class="checklist">
                    <li><input type="checkbox"> –ò–º—è –º–æ–¥—É–ª—è –≤ <code>go.mod</code> —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∏–º–ø–æ—Ä—Ç–æ–º –≤ <code>main.go</code> (–Ω–∞–ø—Ä–∏–º–µ—Ä, <code>module my_new_bot</code> –∏ <code>import "my_new_bot/bot"</code>)</li>
                    <li><input type="checkbox"> –í workflow-—Ñ–∞–π–ª–µ (<code>.github/workflows/deploy.yml</code>) –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–æ–∑–¥–∞–Ω–Ω—ã–º –≤ YC</li>
                    <li><input type="checkbox"> –í—Å–µ 6 —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è</li>
                    <li><input type="checkbox"> –°–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –≤—ã–¥–∞–Ω—ã –≤—Å–µ 3 —Ä–æ–ª–∏ (—à–∞–≥ 6.1)</li>
                </ul>
            </div>
        </section>

        <!-- –í–°–¢–ê–í–õ–ï–ù–ù–û: –î–æ–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Å–µ–∫—Ü–∏—è –¥–µ–ø–ª–æ—è -->
        <section id="deployment">
            <h2><span class="emoji">üöÄ</span> 7. –î–µ–ø–ª–æ–π –∏ –≤–µ–±—Ö—É–∫–∏</h2>
            <div class="step">
                <h3>7.1 –ü–µ—Ä–≤—ã–π —Ä—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)</h3>
                <p>–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π –≤—Ä—É—á–Ω—É—é, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç.</p>
                <div class="command">
                    <code># –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Docker –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Yandex Cloud Registry
yc container registry configure-docker

# –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ –æ–±—Ä–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ (–∑–∞–º–µ–Ω–∏—Ç–µ REGISTRY_ID)
docker build -t cr.yandex/REGISTRY_ID/your-bot:latest -f Dockerfile.yc .
docker push cr.yandex/REGISTRY_ID/your-bot:latest

# –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—Ä—É—á–Ω—É—é (–∑–∞–º–µ–Ω–∏—Ç–µ ID –∏ —Ç–æ–∫–µ–Ω)
yc serverless container revision deploy \
  --container-name your-bot-container \
  --image cr.yandex/REGISTRY_ID/your-bot:latest \
  --service-account-id YOUR_SERVICE_ACCOUNT_ID \
  --environment "TELEGRAM_BOT_TOKEN=YOUR_TOKEN"</code>
                </div>
            </div>
            <div class="step">
                <h3>7.2 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ CI/CD</h3>
                <p>–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä—É—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –º–æ–∂–Ω–æ –¥–æ–≤–µ—Ä–∏—Ç—å –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏–∫–µ:</p>
                <div class="command">
                    <code># –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—à–∏—Ç–µ –∫–æ–¥ –≤ –≤–µ—Ç–∫—É main ‚Äî GitHub Actions —Å–¥–µ–ª–∞–µ—Ç –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ
git add .
git commit -m "Initial commit: ready for CI/CD"
git push origin main</code>
                </div>
                <p>–ü–æ—Å–ª–µ –ø—É—à–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞ –≤–∫–ª–∞–¥–∫–µ <strong>Actions</strong> –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ GitHub.</p>
            </div>
            <div class="step">
                <h3>7.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–∞ Telegram</h3>
                <p>–ö–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –µ–º—É.</p>
                <div class="command">
                    <code># –ü–æ–ª—É—á–∏—Ç–µ URL –≤–∞—à–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
CONTAINER_URL=$(yc serverless container get --name your-bot-container --format json | jq -r '.url')
echo $CONTAINER_URL

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–µ–±—Ö—É–∫ (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_TOKEN)
curl -X POST "https://api.telegram.org/botYOUR_TOKEN/setWebhook" \
  -H "Content-Type: application/json" \
  -d "{\"url\": \"$CONTAINER_URL/\"}"</code>
                </div>
                <div class="note">
                    <strong>üí° –í–∞–∂–Ω–æ:</strong> –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–æ–¥–µ –±–æ—Ç–∞ (<code>main.go</code>) –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ–±—Ö—É–∫–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π –ø—É—Ç—å <code>"/"</code>.
                </div>
            </div>
        </section>

        <!-- –í–°–¢–ê–í–õ–ï–ù–ù–û: –ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è —Å —á–∞—Å—Ç—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏ -->
        <section id="debugging">
            <h2><span class="emoji">üîç</span> 8. –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</h2>
            <table>
                <thead>
                    <tr>
                        <th>–û—à–∏–±–∫–∞ / –°–∏–º–ø—Ç–æ–º</th>
                        <th>–í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞</th>
                        <th>–†–µ—à–µ–Ω–∏–µ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>ERROR: failed to find container with name... Permission denied</code></td>
                        <td>–£ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (SA) –Ω–µ—Ç —Ä–æ–ª–∏ <code>editor</code> –Ω–∞ –ø–∞–ø–∫–µ –∏–ª–∏ —Ä–æ–ª–∏ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.</td>
                        <td>–í—ã–ø–æ–ª–Ω–∏—Ç—å <strong>–®–∞–≥ 6.1</strong> –¥–∞–Ω–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞.</td>
                    </tr>
                    <tr>
                        <td><code>denied: Permission denied</code> –ø—Ä–∏ push –æ–±—Ä–∞–∑–∞</td>
                        <td>–£ SA –Ω–µ—Ç —Ä–æ–ª–∏ <code>container-registry.images.pusher</code> –Ω–∞ —Ä–µ–µ—Å—Ç—Ä–µ.</td>
                        <td>–í—ã–ø–æ–ª–Ω–∏—Ç—å <strong>–®–∞–≥ 6.1</strong>.</td>
                    </tr>
                    <tr>
                        <td>–ë–æ—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –ø–∞–¥–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å <code>EOF</code></td>
                        <td>–ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–º–µ–Ω–∏ Go-–º–æ–¥—É–ª—è –≤ <code>go.mod</code> –∏ –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ –∫–æ–¥–µ.</td>
                        <td>–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–º—è –≤ <code>go.mod</code> (–Ω–∞–ø—Ä–∏–º–µ—Ä, <code>my_new_bot</code>) —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∏–º–ø–æ—Ä—Ç–æ–º <code>"my_new_bot/bot"</code> –≤ <code>main.go</code>.</td>
                    </tr>
                    <tr>
                        <td>–í–µ–±—Ö—É–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –Ω–æ –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç</td>
                        <td>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫—É.</td>
                        <td>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: <code>yc serverless container revision list --container-name your-bot-container</code> –∏ –ø–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–µ–≤–∏–∑–∏–∏.</td>
                    </tr>
                    <tr>
                        <td>GitHub Actions –ø–∞–¥–∞–µ—Ç –Ω–∞ —ç—Ç–∞–ø–µ <code>Configure Yandex Cloud with IAM Key</code></td>
                        <td>–ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–π JSON –∫–ª—é—á –≤ —Å–µ–∫—Ä–µ—Ç–µ <code>YC_IAM_KEY_JSON</code>.</td>
                        <td>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á: <code>yc iam key create --service-account-name your-bot-sa --output new-key.json</code> –∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç.</td>
                    </tr>
                </tbody>
            </table>
            <div class="step">
                <h3>–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</h3>
                <div class="command">
                    <code># –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–µ–≤–∏–∑–∏–π (–≤–µ—Ä—Å–∏–π) –≤–∞—à–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
yc serverless container revision list --container-name your-bot-container

# –ü–æ–ª—É—á–∏—Ç—å URL –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
yc serverless container get --name your-bot-container --format json | jq -r '.url'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤–µ–±—Ö—É–∫–∞ –≤ Telegram
curl -s "https://api.telegram.org/botYOUR_TOKEN/getWebhookInfo" | jq</code>
                </div>
            </div>
        </section>

        <section id="templates">
            <h2><span class="emoji">üéØ</span> 9. –®–∞–±–ª–æ–Ω—ã –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</h2>
            <div class="note">
                <p><strong>‚úÖ –ì–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã:</strong></p>
                <ul class="checklist">
                    <li><a href="https://github.com/vmkotov/vmkotov_test_bot" target="_blank">–ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω</a> ‚Äî —Ç–æ, —á—Ç–æ –æ–ø–∏—Å–∞–Ω–æ –≤ —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ</li>
                    <li><a href="https://github.com/vmkotov/python-telegram-bot-template" target="_blank">–®–∞–±–ª–æ–Ω –Ω–∞ Python (aiogram)</a></li>
                </ul>
            </div>
        </section>
    </div>
    <script>
        // –°–∫—Ä–∏–ø—Ç –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (–æ—Å—Ç–∞–≤–ª—è—é –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞, –Ω–æ –≤ –¥–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
        document.querySelectorAll('.command').forEach(block => {
            const button = document.createElement('button');
            button.className = 'copy-btn';
            button.textContent = 'üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å';
            button.onclick = () => {
                const code = block.querySelector('code').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    button.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                    setTimeout(() => button.textContent = 'üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å', 2000);
                });
            };
            block.appendChild(button);
        });
    </script>
</body>
</html>