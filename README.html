<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∞–±–ª–æ–Ω –¥–ª—è –¥–µ–ø–ª–æ—è Telegram –±–æ—Ç–∞ –Ω–∞ Yandex Cloud Serverless Containers</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-top: 20px;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        h2 {
            color: #3498db;
            margin-top: 30px;
        }
        h3 {
            color: #2c3e50;
        }
        .step {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .important {
            background: #d1ecf1;
            border-left: 4px solid #0dcaf0;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        code {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        .command {
            position: relative;
        }
        .copy-btn {
            position: absolute;
            right: 10px;
            top: 10px;
            background: #667eea;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        .copy-btn:hover {
            background: #764ba2;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #f2f2f2;
        }
        .time-badge {
            display: inline-block;
            background: #4CAF50;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            margin-left: 10px;
        }
        .quick-start {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
        }
        .quick-start h3 {
            color: white;
            margin-top: 0;
        }
        .tip {
            background: #e8f5e8;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ –®–∞–±–ª–æ–Ω –¥–ª—è –¥–µ–ø–ª–æ—è Telegram –±–æ—Ç–∞ –Ω–∞ Yandex Cloud Serverless Containers</h1>
        <p><strong>–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:</strong> 5 –º–∏–Ω—É—Ç (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π)</p>
        
        <div class="quick-start">
            <h3>‚ö° –°–£–ü–ï–†-–ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ (–µ—Å–ª–∏ –∫–æ–ø–∏—Ä—É–µ—à—å —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π):</h3>
            <div class="command">
                <button class="copy-btn" onclick="copyToClipboard(this)">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë</button>
                <pre id="quick-commands"># 1. –ö–ª–æ–Ω–∏—Ä—É–π –∏ –∑–∞–π–¥–∏ –≤ –ø–∞–ø–∫—É
git clone https://github.com/vmkotov/vmkotov_test_bot.git my-bot
cd my-bot

# 2. –ò—Å–ø—Ä–∞–≤—å –º–æ–¥—É–ª—å –∏ –∏–º–ø–æ—Ä—Ç—ã (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!)
sed -i '' 's|module vmkotov_test_bot|module my-bot|g' go.mod
sed -i '' 's|"vmkotov_test_bot/bot"|"my-bot/bot"|g' main.go

# 3. –ü–æ–ª—É—á–∏ –≤—Å–µ ID –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
echo "=== –ö–û–ü–ò–†–£–ô –≠–¢–ò –ó–ù–ê–ß–ï–ù–ò–Ø –í GITHUB SECRETS ==="
echo "YC_CLOUD_ID: $(yc config get cloud-id 2>/dev/null || echo 'b1g7r2nm7eo87juq7h7n')"
echo "YC_FOLDER_ID: $(yc config get folder-id 2>/dev/null || echo 'b1gk2n6bk496dkh4e9kr')"
echo "YC_SERVICE_ACCOUNT_ID: $(yc iam service-account get your-sa --format json 2>/dev/null | jq -r '.id' || echo '–í–°–¢–ê–í–¨_SA_ID')"
echo "YC_REGISTRY_ID: $(yc container registry get your-registry --format json 2>/dev/null | jq -r '.id' || echo '–í–°–¢–ê–í–¨_REGISTRY_ID')"

# 4. –°–æ–∑–¥–∞–π –∫–ª—é—á –¥–ª—è GitHub Secret
yc iam key create --service-account-name your-sa --output iam-key.json
echo "YC_IAM_KEY_JSON —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:"
cat iam-key.json | head -5
echo "..."
echo "=== –ö–û–ü–ò–†–£–ô –í–ï–°–¨ JSON –í GITHUB SECRET 'YC_IAM_KEY_JSON' ==="</pre>
            </div>
        </div>

        <div class="warning">
            <strong>‚ö†Ô∏è –í–ê–ñ–ù–û! –£—Ä–æ–∫–∏, –≤—ã—É—á–µ–Ω–Ω—ã–µ –∫—Ä–æ–≤—å—é:</strong>
            <ul>
                <li><code>module –∏–º—è</code> –≤ go.mod –∏ –∏–º–ø–æ—Ä—Ç—ã –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å 1:1</li>
                <li>–ü–∞–ø–∫–∞ <code>bot/</code> –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å, –∞ <code>bot.go</code> –±—ã—Ç—å –≤–Ω—É—Ç—Ä–∏</li>
                <li>–ò—Å–ø–æ–ª—å–∑—É–π <code>Dockerfile.yc</code> (–Ω–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–π –≤ Dockerfile!)</li>
                <li>–ù–µ –¥–æ–±–∞–≤–ª—è–π <code>PORT=8080</code> –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ - Yandex Cloud –∑–∞–ø—Ä–µ—â–∞–µ—Ç</li>
                <li>–ù—É–∂–Ω—ã –í–°–ï 6 —Å–µ–∫—Ä–µ—Ç–æ–≤, –∏–Ω–∞—á–µ workflow –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π</li>
            </ul>
        </div>

        <h2>üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¢–û–ß–ù–û —Ç–∞–∫–æ–π)</h2>
        <pre>
vmkotov_test_bot/
‚îú‚îÄ‚îÄ .github/workflows/deploy.yml    # GitHub Actions workflow
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îî‚îÄ‚îÄ bot.go                      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Telegram
‚îú‚îÄ‚îÄ main.go                         # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ go.mod                          # –ú–æ–¥—É–ª—å Go (–ò–ú–Ø –ü–†–û–ï–ö–¢–ê!)
‚îú‚îÄ‚îÄ go.sum
‚îî‚îÄ‚îÄ Dockerfile.yc                   # Dockerfile (–∏–º–µ–Ω–Ω–æ .yc!)</pre>

        <h2>üîë –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Yandex Cloud</h2>
        <div class="step">
            <h3>1.1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π YC CLI</h3>
            <pre>curl https://storage.yandexcloud.net/yandexcloud-yc/install.sh | bash
exec -l $SHELL
yc init</pre>
            
            <h3>1.2. –°–æ–∑–¥–∞–π –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã</h3>
            <pre># Container Registry
yc container registry create --name –≤–∞—à-–±–æ—Ç-registry

# Service Account
yc iam service-account create --name –≤–∞—à-–±–æ—Ç-sa

# –ù–∞–∑–Ω–∞—á—å –ø—Ä–∞–≤–∞
yc resource-manager folder add-access-binding $(yc config get folder-id) \
  --service-account-name –≤–∞—à-–±–æ—Ç-sa \
  --role container-registry.images.puller
  
yc resource-manager folder add-access-binding $(yc config get folder-id) \
  --service-account-name –≤–∞—à-–±–æ—Ç-sa \
  --role editor</pre>
        </div>

        <h2>‚öôÔ∏è –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets</h2>
        <div class="important">
            <strong>–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:</strong> –ë–µ–∑ –≤—Å–µ—Ö 6 —Å–µ–∫—Ä–µ—Ç–æ–≤ workflow –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π!
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>Secret Name</th>
                    <th>–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å</th>
                    <th>–ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>TELEGRAM_BOT_TOKEN</code></td>
                    <td>–û—Ç @BotFather –≤ Telegram</td>
                    <td><code>8324160111:AAHoxEtIdaNHurLfbta4fHB3iYy0ixnTc0</code></td>
                </tr>
                <tr>
                    <td><code>YC_IAM_KEY_JSON</code></td>
                    <td><pre>yc iam key create --service-account-name –≤–∞—à-–±–æ—Ç-sa --output key.json
cat key.json</pre></td>
                    <td>–í–µ—Å—å JSON (4000+ —Å–∏–º–≤–æ–ª–æ–≤)</td>
                </tr>
                <tr>
                    <td><code>YC_CLOUD_ID</code></td>
                    <td><code>yc config get cloud-id</code></td>
                    <td><code>b1g7r2nm7eo87juq7h7n</code></td>
                </tr>
                <tr>
                    <td><code>YC_FOLDER_ID</code></td>
                    <td><code>yc config get folder-id</code></td>
                    <td><code>b1gk2n6bk496dkh4e9kr</code></td>
                </tr>
                <tr>
                    <td><code>YC_SERVICE_ACCOUNT_ID</code></td>
                    <td><pre>yc iam service-account get –≤–∞—à-–±–æ—Ç-sa --format json | jq -r '.id'</pre></td>
                    <td><code>ajeni2drn7gs6cmemvv2</code></td>
                </tr>
                <tr>
                    <td><code>YC_REGISTRY_ID</code></td>
                    <td><pre>yc container registry get –≤–∞—à-–±–æ—Ç-registry --format json | jq -r '.id'</pre></td>
                    <td><code>crpvrfum4pqm6pp2sv53</code></td>
                </tr>
            </tbody>
        </table>

        <div class="tip">
            <strong>üí° –°–æ–≤–µ—Ç:</strong> –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏ –≤—Å–µ ID, –ø–æ—Ç–æ–º —Ä–∞–∑–æ–º –¥–æ–±–∞–≤—å –≤—Å–µ 6 —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub.
        </div>

        <h2>üöÄ –®–∞–≥ 3: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞</h2>
        <div class="step">
            <h3>3.1. –ò–∑–º–µ–Ω–∏ –∏–º—è –ø—Ä–æ–µ–∫—Ç–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)</h3>
            <div class="command">
                <button class="copy-btn" onclick="copyToClipboard(this)">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <pre># –í go.mod
sed -i '' 's|module vmkotov_test_bot|module –≤–∞—à-–ø—Ä–æ–µ–∫—Ç|g' go.mod

# –í main.go
sed -i '' 's|"vmkotov_test_bot/bot"|"–≤–∞—à-–ø—Ä–æ–µ–∫—Ç/bot"|g' main.go</pre>
            </div>
            
            <h3>3.2. –£–±–µ–¥–∏—Å—å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ñ–∞–π–ª–æ–≤</h3>
            <pre># –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –¢–û–ß–ù–û —Ç–∞–∫:
ls -la
# Dockerfile.yc  (–Ω–µ Dockerfile!)
# bot/bot.go     (–Ω–µ telegram_handler.go –≤ –∫–æ—Ä–Ω–µ!)</pre>
        </div>

        <h2>üì¶ –®–∞–≥ 4: –î–µ–ø–ª–æ–π</h2>
        <div class="step">
            <h3>4.1. –ó–∞–ø—É—à–∏ –≤ GitHub</h3>
            <pre>git add .
git commit -m "Initial bot deployment"
git push origin main</pre>
            
            <h3>4.2. –ü—Ä–æ–≤–µ—Ä—å GitHub Actions</h3>
            <p>–ó–∞–π–¥–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí Actions ‚Üí "Deploy vmkotov_test_bot"</p>
            <p>–ï—Å–ª–∏ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –µ—Å—Ç—å, –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –¥–µ–ø–ª–æ–π.</p>
        </div>

        <h2>üîß –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–∞</h2>
        <div class="step">
            <pre># –ü–æ–ª—É—á–∏ URL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
CONTAINER_URL=$(yc serverless container get --name –≤–∞—à-–±–æ—Ç --format json | jq -r '.url')

# –£—Å—Ç–∞–Ω–æ–≤–∏ –≤–µ–±—Ö—É–∫
curl -X POST "https://api.telegram.org/bot&lt;–í–ê–®_–¢–û–ö–ï–ù&gt;/setWebhook?url=$CONTAINER_URL/"

# –ü—Ä–æ–≤–µ—Ä—å
curl "https://api.telegram.org/bot&lt;–í–ê–®_–¢–û–ö–ï–ù&gt;/getWebhookInfo"</pre>
        </div>

        <h2>üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è</h2>
        <table>
            <tr>
                <th>–û—à–∏–±–∫–∞</th>
                <th>–ü—Ä–∏—á–∏–Ω–∞</th>
                <th>–†–µ—à–µ–Ω–∏–µ</th>
            </tr>
            <tr>
                <td><code>secrets-exist=false</code></td>
                <td>–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤</td>
                <td>–î–æ–±–∞–≤—å –í–°–ï 6 —Å–µ–∫—Ä–µ—Ç–æ–≤</td>
            </tr>
            <tr>
                <td><code>package ... is not in std</code></td>
                <td>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã</td>
                <td>–ò—Å–ø—Ä–∞–≤—å go.mod –∏ main.go –∫–∞–∫ –≤ —à–∞–≥–µ 3.1</td>
            </tr>
            <tr>
                <td><code>COPY .env: not found</code></td>
                <td>–°—Ç–∞—Ä—ã–π Dockerfile</td>
                <td>–ò—Å–ø–æ–ª—å–∑—É–π Dockerfile.yc (–Ω–µ –º–µ–Ω—è–π –∏–º—è!)</td>
            </tr>
            <tr>
                <td><code>Environment variable PORT is forbidden</code></td>
                <td>–õ–∏—à–Ω—è—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è</td>
                <td>–£–¥–∞–ª–∏ PORT=8080 –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö</td>
            </tr>
        </table>

        <div class="important">
            <h3>‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:</h3>
            <ol>
                <li>–í—Å–µ 6 —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ GitHub ‚úì</li>
                <li><code>go.mod</code> –∏ –∏–º–ø–æ—Ä—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã ‚úì</li>
                <li>–§–∞–π–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è <code>Dockerfile.yc</code> ‚úì</li>
                <li>–ü–∞–ø–∫–∞ <code>bot/</code> —Å <code>bot.go</code> –≤–Ω—É—Ç—Ä–∏ ‚úì</li>
                <li>Workflow –ø—Ä–æ—à—ë–ª –≤—Å–µ —à–∞–≥–∏ –¥–æ "Deployment complete!" ‚úì</li>
                <li>–í–µ–±—Ö—É–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω ‚úì</li>
            </ol>
        </div>

        <h2>üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞</h2>
        <p>–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –ø—Ä–æ–≤–µ—Ä—å:</p>
        <ul>
            <li>–õ–æ–≥–∏ –≤ GitHub Actions</li>
            <li><code>yc serverless container logs --name –≤–∞—à-–±–æ—Ç</code></li>
            <li>–°—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 1:1 –∫–∞–∫ –≤—ã—à–µ)</li>
        </ul>

        <p style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee;">
            –û–±–Ω–æ–≤–ª–µ–Ω–æ: 29 –¥–µ–∫–∞–±—Ä—è 2024 | –ù–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–ø—ã—Ç–∞ –¥–µ–ø–ª–æ—è RiskReporter_bot<br>
            <strong>–ö–ª—é—á–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</strong> –î–µ–ª–∞–π –í–°–Å —Ç–æ—á–Ω–æ –∫–∞–∫ –≤ —à–∞–±–ª–æ–Ω–µ, –Ω–µ –∏–º–ø—Ä–æ–≤–∏–∑–∏—Ä—É–π!
        </p>
    </div>

    <script>
        function copyToClipboard(button) {
            const pre = button.parentElement.querySelector('pre');
            const text = pre.textContent;
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ª—é–±–æ–π –∫–æ–¥
        document.querySelectorAll('code').forEach(code => {
            code.onclick = function() {
                navigator.clipboard.writeText(this.textContent);
                this.style.backgroundColor = '#4CAF50';
                setTimeout(() => this.style.backgroundColor = '', 500);
            };
        });
    </script>
</body>
</html>
